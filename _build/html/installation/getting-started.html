

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Setup &mdash; MAD  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Mappings" href="mappings.html" />
    <link rel="prev" title="Configfile" href="config-file.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html">
          

          
            
            <img src="../_static/mad_banner_trans.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">General</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../how-mad-works.html">How does MAD work?</a></li>
</ul>
<p class="caption"><span class="caption-text">Installation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="config-file.html">Configfile</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="#mad-server">MAD Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="#phone-setup">Phone Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="mappings.html">Mappings</a></li>
</ul>
<p class="caption"><span class="caption-text">Common Issues</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../common-issues/faq.html">FAQ</a></li>
</ul>
<p class="caption"><span class="caption-text">Scanning Modes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../scanning-modes/modes.html">OCR</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scanning-modes/modes.html#mitm">MITM</a></li>
</ul>
<p class="caption"><span class="caption-text">Extras</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../extras/webfrontends.html">Available Webfrontends</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">MAD</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Setup</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/installation/getting-started.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="setup">
<h1>Setup<a class="headerlink" href="#setup" title="Permalink to this headline">¶</a></h1>
<p>We begin with the MAD server. Its basically just setting up a Database and fill in the MAD config.</p>
</div>
<div class="section" id="mad-server">
<h1>MAD Server<a class="headerlink" href="#mad-server" title="Permalink to this headline">¶</a></h1>
<div class="section" id="ubuntu-debian">
<h2>Ubuntu/Debian<a class="headerlink" href="#ubuntu-debian" title="Permalink to this headline">¶</a></h2>
<p>DISCLAIMER: This whole article assumes a fresh installed <a class="reference external" href="https://www.ubuntu.com/download/server">Ubuntu 18.04 Server</a>, located in the same network as your phones. There may be some difference to your setup. Please keep that in mind!</p>
<div class="section" id="mysql-mariadb">
<h3>MySQL/MariaDB<a class="headerlink" href="#mysql-mariadb" title="Permalink to this headline">¶</a></h3>
<p>You need a Database with full permissions. That DB can be located on a different Server, but needs to be accessible by your MAD server. It does not matter if you are using MariaDB or MySQL, but no other Database-system is supported.</p>
<blockquote>
<div>If you are plan to use <a class="reference external" href="https://github.com/whitewillem/PMSF">PMSF</a> as a webfrontend: use at least MySQL 8 or MariaDB 10.2 or higher!</div></blockquote>
<div class="section" id="install-mariadb-on-your-server">
<h4>Install MariaDB on your Server:<a class="headerlink" href="#install-mariadb-on-your-server" title="Permalink to this headline">¶</a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>apt update
apt install mariadb-server
mysql_secure_installation
</pre></div>
</div>
<blockquote>
<div>If you not sure about the questions asked in <code class="docutils literal notranslate"><span class="pre">mysql_secure_installation</span></code>, just press enter for each question ;)</div></blockquote>
<p>Log in to your Database and create an dedicated user for MAD, if you don’t know how to, take a look at <a class="reference external" href="https://www.digitalocean.com/community/tutorials/how-to-create-a-new-user-and-grant-permissions-in-mysql">this tutorial</a>.</p>
<p>They are two supported Database Schemas: <strong>Monocle</strong> and <strong>OSM-Rocketmap</strong>, a <a class="reference external" href="https://github.com/cecpk/OSM-Rocketmap">fork</a> to support OSM map titles.If you want to use Monocle, create an empty database and import <a class="reference external" href="https://raw.githubusercontent.com/whitewillem/PMSF/master/sql/cleandb.sql">this schema</a> like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mysql</span> <span class="o">-</span><span class="n">u</span> <span class="n">root</span> <span class="o">-</span><span class="n">e</span> <span class="s2">&quot;create database MonocleDB;&quot;</span>
<span class="n">curl</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">raw</span><span class="o">.</span><span class="n">githubusercontent</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">whitewillem</span><span class="o">/</span><span class="n">PMSF</span><span class="o">/</span><span class="n">master</span><span class="o">/</span><span class="n">sql</span><span class="o">/</span><span class="n">cleandb</span><span class="o">.</span><span class="n">sql</span> <span class="o">|</span> <span class="n">mysql</span> <span class="o">-</span><span class="n">u</span> <span class="n">root</span> <span class="n">MonocleDB</span> 
</pre></div>
</div>
<p>If you want to use the Rocketmap schema, install python2.7, setup Rocketmap as a webserver only and launch it for the first time. It will create the the tables automatically if you create the database itself before. Follow the guide from the <a class="reference external" href="https://rocketmap.readthedocs.io/en/develop/basic-install/index.html">official Rocketmap documentation</a>, but <strong>make sure to clone the <a class="reference external" href="https://github.com/cecpk/OSM-Rocketmap">OSM-Rocketmap</a> fork</strong> instead of the normal one.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python2</span><span class="o">.</span><span class="mi">7</span> <span class="n">runserver</span><span class="o">.</span><span class="n">py</span> <span class="o">-</span><span class="n">os</span>
</pre></div>
</div>
<p>Rocketmap can act as a webfrontend as well. See <a class="reference internal" href="../extras/webfrontends.html"><span class="doc">webfrontends</span></a> for more informations.</p>
<p>And finally, grant permissions for your dedicated MAD database user to the database you’ve just created:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">GRANT</span> <span class="n">ALL</span> <span class="n">PRIVILEGES</span> <span class="n">ON</span> <span class="n">DATABASENAMEHERE</span><span class="o">.*</span> <span class="n">TO</span> <span class="s1">&#39;DATABASEUSERHERE&#39;</span><span class="o">@</span><span class="s1">&#39;localhost&#39;</span><span class="p">;</span>
<span class="n">FLUSH</span> <span class="n">PRIVILEGES</span><span class="p">;</span>
</pre></div>
</div>
<p>Now you are ready to setup the MAD server itself.</p>
</div>
</div>
<div class="section" id="python">
<h3>Python<a class="headerlink" href="#python" title="Permalink to this headline">¶</a></h3>
<p>Since Ubuntu 18.04 does comes with a pre-installed python3.6 version but without a pip3 installation, run this command to install it:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>apt install python3-pip
</pre></div>
</div>
<p>Make sure you have the right version installed, since even if python3.6 is installed, the <code class="docutils literal notranslate"><span class="pre">python3</span></code> command could still point to <code class="docutils literal notranslate"><span class="pre">python3.5</span></code> or below!
Check if <code class="docutils literal notranslate"><span class="pre">pip</span></code> and <code class="docutils literal notranslate"><span class="pre">python</span></code> is installed correctly by running:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">python3</span> <span class="pre">--version</span></code> - should return <code class="docutils literal notranslate"><span class="pre">3.6.x</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">pip3</span> <span class="pre">--version</span></code> - If it returns a version, it is working.</li>
</ul>
</div>
<div class="section" id="mad-pip-packages">
<h3>MAD/PIP Packages<a class="headerlink" href="#mad-pip-packages" title="Permalink to this headline">¶</a></h3>
<p>Next Step is to clone this repository and install all the required pip packages:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git clone https://github.com/Map-A-Droid/MAD.git
</pre></div>
</div>
<p>Change into in the directory of MAD and run:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip3 install -r requirements.txt
</pre></div>
</div>
<blockquote>
<div>If you are encountering the error <code class="docutils literal notranslate"><span class="pre">Command</span> <span class="pre">&quot;python</span> <span class="pre">setup.py</span> <span class="pre">egg_info&quot;</span> <span class="pre">failed</span> <span class="pre">with</span> <span class="pre">error</span> <span class="pre">code</span> <span class="pre">1</span></code>, make sure you have the apt package <code class="docutils literal notranslate"><span class="pre">default-libmysqlclient-dev</span></code> installed.</div></blockquote>
<blockquote>
<div>If you want to use OCR to scan raids <strong>or</strong> scanning for Quests, run with <code class="docutils literal notranslate"><span class="pre">requirements_ocr.txt</span></code> and install additional packages: <code class="docutils literal notranslate"><span class="pre">apt-get</span> <span class="pre">install</span> <span class="pre">tesseract-ocr</span> <span class="pre">python-opencv</span></code></div></blockquote>
</div>
<div class="section" id="mad-config">
<h3>MAD Config<a class="headerlink" href="#mad-config" title="Permalink to this headline">¶</a></h3>
<p>Copy the example config file and rename it to <code class="docutils literal notranslate"><span class="pre">config.ini</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cp</span> <span class="n">configs</span><span class="o">/</span><span class="n">config</span><span class="o">.</span><span class="n">ini</span><span class="o">.</span><span class="n">example</span> <span class="n">configs</span><span class="o">/</span><span class="n">config</span><span class="o">.</span><span class="n">ini</span>
</pre></div>
</div>
<blockquote>
<div>The article <a class="reference internal" href="config-file.html"><span class="doc">Config File</span></a> has more detailed descriptions about the available options.</div></blockquote>
<p>Populate the config with at least the database configuration, runtype and the Pogoassets path.The runtype is depending on the mode you want to use. OCR or MITM (learn more about this topic <a class="reference internal" href="../scanning-modes/modes.html"><span class="doc">here</span></a>). If you want to use the MITM mode, uncomment <code class="docutils literal notranslate"><span class="pre">only_scan</span></code>. For OCR start two instances, one with <code class="docutils literal notranslate"><span class="pre">only_scan</span></code> and the other one with <code class="docutils literal notranslate"><span class="pre">only_ocr</span></code> and <code class="docutils literal notranslate"><span class="pre">ocr_multitask</span></code>.The Pogoassets are necessary as well. Clone <a class="reference external" href="https://github.com/ZeChrales/PogoAssets/">this repository</a> somewhere on your server and fill in the full path of it. For example: <code class="docutils literal notranslate"><span class="pre">pogoasset:</span> <span class="pre">/home/mad/PogoAssets</span></code></p>
<p>Every other config option is optional and not needed for the first start.</p>
</div>
<div class="section" id="mappings">
<h3>Mappings<a class="headerlink" href="#mappings" title="Permalink to this headline">¶</a></h3>
<p>The next step is to configure the mappings.json (located in configs/mappings.json). This file is responsible to “map” your phones to walkers and walkers to areas. The easiest way to configure that is via the MAD webfrontend, MADmin. Start it with:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python3</span> <span class="n">configmode</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>MADmin will run on http://localhost:5000/. Go to <code class="docutils literal notranslate"><span class="pre">Mapping</span> <span class="pre">Editor</span></code> and start with adding an area. The type is depending on what do you want to scan. Every type and option of it has a description explaining itself.</p>
<p>Have a look at <a class="reference internal" href="mappings.html"><span class="doc">Mappings</span></a> to understand how this works.</p>
</div>
<div class="section" id="running">
<h3>Running<a class="headerlink" href="#running" title="Permalink to this headline">¶</a></h3>
<p>If everything is set up correctly, you can start MAD:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python3</span> <span class="n">start</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="phone-setup">
<h1>Phone Setup<a class="headerlink" href="#phone-setup" title="Permalink to this headline">¶</a></h1>
<p>fooo</p>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="mappings.html" class="btn btn-neutral float-right" title="Mappings" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="config-file.html" class="btn btn-neutral float-left" title="Configfile" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, MADdev Team

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>